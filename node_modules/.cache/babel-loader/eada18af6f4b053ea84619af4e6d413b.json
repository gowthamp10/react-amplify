{"ast":null,"code":"import _defineProperty from\"/home/ubuntu/Documents/BankingAppFinal/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/ubuntu/Documents/BankingAppFinal/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/ubuntu/Documents/BankingAppFinal/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import HeaderCust from\"./HeaderCust\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function OnlineTransfer(){var cid=sessionStorage.getItem(\"id\");var _useState=useState(null),_useState2=_slicedToArray(_useState,2),msg=_useState2[0],setMsg=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),accinfo=_useState6[0],setAcinfo=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),blist=_useState8[0],setBlist=_useState8[1];var handleSubmit=function handleSubmit(e){e.preventDefault();console.log(\"form data\",data);axios.post(\"http://localhost:8090/api/accounts/withdraw\",data).then(function(resp){setMsg(\"Transfer successfully\");}).catch(function(err){window.confirm(\"Insufficient balance\");console.log(err);});};var handleInput=function handleInput(e){setData(_objectSpread(_objectSpread({},data),{},_defineProperty({},e.target.name,e.target.value)));};useEffect(function(){axios.get(\"http://localhost:8090/api/customers/beneficiary/\"+cid).then(function(resp){console.log(resp.data);setBlist(resp.data.data);}).catch(function(err){console.log(err);});axios.get(\"http://localhost:8090/api/customers/account/\"+cid).then(function(resp){console.log(\"Account Info\",resp.data.data);setAcinfo(resp.data.data);data.accno=resp.data.data.accno;}).catch(function(err){console.log(err);});},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(HeaderCust,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-10\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-6 mx-auto\",style:{paddingLeft:\"150px\"},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Account Transfer\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group form-row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label\",children:\"Select Recipient\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsxs(\"select\",{type:\"text\",name:\"bname\",onChange:handleInput,className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Select Recipient \"}),blist.map(function(b){return/*#__PURE__*/_jsx(\"option\",{value:b.id,children:b.bname},b.id);})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group form-row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label\",children:\" Remarks \"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"ttype\",onChange:handleInput,className:\"form-control\",value:data.ttype})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group form-row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label\",children:\"Available Balance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:handleInput,value:accinfo.balance,readOnly:true,className:\"form-control\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group form-row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label\",children:\" Transfer Amount\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",max:accinfo.balance,onChange:handleInput,name:\"dramount\",className:\"form-control\",value:data.dramount})})]}),/*#__PURE__*/_jsx(\"button\",{id:\"transfer\",className:\"btn btn-primary float-right\",children:\"Transfer Now\"})]})}),msg!=null?/*#__PURE__*/_jsx(\"div\",{className:\"alert text-success font-weight-bold text-center\",children:msg}):\"\"]})})})})})})]});}export default OnlineTransfer;","map":{"version":3,"sources":["/home/ubuntu/Documents/BankingAppFinal/src/components/OnlineTransfer.js"],"names":["axios","useEffect","useState","HeaderCust","OnlineTransfer","cid","sessionStorage","getItem","msg","setMsg","data","setData","accinfo","setAcinfo","blist","setBlist","handleSubmit","e","preventDefault","console","log","post","then","resp","catch","err","window","confirm","handleInput","target","name","value","get","accno","paddingLeft","map","b","id","bname","ttype","balance","dramount"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport HeaderCust from \"./HeaderCust\";\r\n\r\n\r\n\r\nfunction OnlineTransfer(){\r\n    const cid=sessionStorage.getItem(\"id\")\r\n    const [msg,setMsg]=useState(null)\r\n    const [data,setData]=useState({\r\n\r\n    })\r\n    const [accinfo,setAcinfo]=useState({})\r\n    const [blist,setBlist]=useState([])\r\n    const handleSubmit=e=>{\r\n        e.preventDefault()\r\n        console.log(\"form data\",data)\r\n        axios.post(\"http://localhost:8090/api/accounts/withdraw\",data).then(resp=>{\r\n            setMsg(\"Transfer successfully\")\r\n        })\r\n        .catch(err=>{\r\n            window.confirm(\"Insufficient balance\");\r\n            console.log(err)\r\n        })\r\n    }\r\n    const handleInput=e=>{\r\n        setData({...data,[e.target.name]:e.target.value})\r\n    }\r\n    useEffect(()=>{\r\n        axios.get(\"http://localhost:8090/api/customers/beneficiary/\"+cid)\r\n        .then(resp=>{\r\n            console.log(resp.data)    \r\n            setBlist(resp.data.data)        \r\n        })\r\n        .catch(err=>{\r\n            console.log(err)\r\n        })\r\n        axios.get(\"http://localhost:8090/api/customers/account/\"+cid)\r\n        .then(resp=>{\r\n            console.log(\"Account Info\",resp.data.data)    \r\n            setAcinfo(resp.data.data) \r\n            data.accno=resp.data.data.accno                   \r\n        })\r\n        .catch(err=>{\r\n            console.log(err)\r\n        })\r\n\r\n    },[])\r\n    return (\r\n        <>\r\n        <HeaderCust/>   \r\n        <div className=\"container-fluid\">\r\n        <div className=\"row\">\r\n                \r\n        <div className=\"col-sm-10\">\r\n        <div className=\"row\">\r\n\t<div className=\"col-sm-6 mx-auto\"style={{paddingLeft:\"150px\"}}>\r\n        <div className=\"card shadow mt-3\">\r\n            <div className=\"card-header\">\r\n                <h5>Account Transfer</h5>\r\n            </div>\r\n            <div className=\"card-body\">\r\n                <form onSubmit={handleSubmit}>\r\n                    <div className=\"form-group form-row\">\r\n                        <label className=\"col-sm-4 col-form-label\">Select Recipient</label> \r\n                        <div className=\"col-sm-8\">\r\n                        <select type=\"text\" name=\"bname\" onChange={handleInput} className=\"form-control\">\r\n                            <option>Select Recipient </option>\r\n                            {blist.map(b=>(\r\n                                <option key={b.id} value={b.id}>{b.bname }</option>\r\n                            ))}\r\n                        </select>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group form-row\">\r\n                        <label className=\"col-sm-4 col-form-label\"> Remarks </label> \r\n                        <div className=\"col-sm-8\">\r\n                        <input type=\"text\" name=\"ttype\"  onChange={handleInput}\r\n                            className=\"form-control\" value={data.ttype}/>\r\n                            </div>\r\n                    </div>\r\n                    <div className=\"form-group form-row\">\r\n                        <label className=\"col-sm-4 col-form-label\">Available Balance</label> \r\n                        <div className=\"col-sm-8\">\r\n                        <input type=\"text\" onChange={handleInput}\r\n                        value={accinfo.balance} readOnly className=\"form-control\"/>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"form-group form-row\">\r\n                        <label className=\"col-sm-4 col-form-label\"> Transfer Amount</label> \r\n                        <div className=\"col-sm-8\">\r\n                        <input type=\"number\" min=\"1\" max={accinfo.balance} onChange={handleInput}\r\n                        name=\"dramount\" className=\"form-control\" value={data.dramount} />\r\n                        </div>\r\n                    </div>\r\n                    <button id=\"transfer\" className=\"btn btn-primary float-right\">Transfer\r\n                        Now</button>\r\n                </form>\r\n            </div>\r\n            {msg!=null ?(\r\n                <div className=\"alert text-success font-weight-bold text-center\">\r\n                    {msg}\r\n                </div>\r\n            ):\"\"}\r\n        </div>\r\n\t</div>\r\n</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        </>\r\n    )}\r\n\r\nexport default OnlineTransfer;"]},"metadata":{},"sourceType":"module"}