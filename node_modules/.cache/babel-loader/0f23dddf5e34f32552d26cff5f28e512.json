{"ast":null,"code":"import _defineProperty from\"/home/ubuntu/Documents/BankingAppFinal/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/ubuntu/Documents/BankingAppFinal/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/ubuntu/Documents/BankingAppFinal/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import Header from\"./Header\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function OpenAccount(){var navigate=useNavigate();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),submitted=_useState2[0],setSubmitted=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),customers=_useState4[0],setCustomers=_useState4[1];var _useState5=useState({\"actype\":\"\",\"balance\":0,\"minbal\":1000,\"custid\":\"\"}),_useState6=_slicedToArray(_useState5,2),account=_useState6[0],setAccount=_useState6[1];useEffect(function(){axios.get(\"http://localhost:8090/api/customers/pending\").then(function(resp){setCustomers(resp.data.data);console.log(customers);});},[]);var handleSubmit=function handleSubmit(e){e.preventDefault();setSubmitted(true);};var handleInput=function handleInput(e){setAccount(_objectSpread(_objectSpread({},account),{},_defineProperty({},e.target.name,e.target.value)));};useEffect(function(){if(submitted){console.log(\"I am here\");console.log(account);axios.post(\"http://localhost:8090/api/accounts\",account).then(function(resp){var result=resp.data.data;alert(\"Account opened successfully\");navigate('/accounts');}).catch(function(error){console.log(\"Error\",error);//alert(\"Invalid username or password\")\n});}},[submitted]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:\"450px\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"card p-3\",children:/*#__PURE__*/_jsxs(\"form\",{method:\"post\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Customer\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"custid\",value:account.custid,onChange:handleInput,required:true,className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Customer\"}),customers.map(function(x){return/*#__PURE__*/_jsxs(\"option\",{value:x.id,children:[x.id,\" - \",x.cname]},x.id);})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Account Type\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"actype\",value:account.actype,onChange:handleInput,required:true,className:\"form-control\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select Account Type\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Saving Account\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Current Account\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Opening Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"balance\",required:true,value:account.balance,onChange:handleInput,className:\"form-control\",placeholder:\"Opening Amount\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block\",children:\"Open Account\"})]})})]})})})})})]});}export default OpenAccount;","map":{"version":3,"sources":["/home/ubuntu/Documents/BankingAppFinal/src/components/OpenAccount.js"],"names":["axios","useEffect","useState","useNavigate","Header","OpenAccount","navigate","submitted","setSubmitted","customers","setCustomers","account","setAccount","get","then","resp","data","console","log","handleSubmit","e","preventDefault","handleInput","target","name","value","post","result","alert","catch","error","paddingLeft","custid","map","x","id","cname","actype","balance"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Header from \"./Header\";\r\n\r\n\r\nfunction OpenAccount(){\r\n    const navigate=useNavigate()\r\n    const [submitted,setSubmitted]=useState(false)\r\n    const [customers,setCustomers]=useState([])\r\n    const [account,setAccount]=useState({\r\n        \"actype\":\"\",\r\n        \"balance\":0,\r\n        \"minbal\":1000,\r\n        \"custid\":\"\"\r\n    })\r\n    useEffect(()=>{\r\n        axios.get(\"http://localhost:8090/api/customers/pending\")\r\n        .then(resp=>{\r\n            setCustomers(resp.data.data)\r\n            console.log(customers)\r\n        })\r\n    },[])\r\n    const handleSubmit=(e)=>{\r\n        e.preventDefault()\r\n        setSubmitted(true)\r\n    }\r\n\r\n    const handleInput=(e)=>{\r\n        setAccount({...account,[e.target.name]:e.target.value})\r\n    }\r\n    \r\n    useEffect(()=>{\r\n        if(submitted){\r\n            console.log(\"I am here\")\r\n            console.log(account)\r\n            axios.post(\"http://localhost:8090/api/accounts\",account)\r\n            .then(resp=>{\r\n                let result=resp.data.data;\r\n                alert(\"Account opened successfully\")\r\n                navigate('/accounts')\r\n            })\r\n            .catch(error=>{\r\n                console.log(\"Error\",error);\r\n                //alert(\"Invalid username or password\")\r\n            })            \r\n        }\r\n    },[submitted])\r\n    \r\n    return(\r\n        <>\r\n        <Header/>\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                \r\n                <div style={{paddingLeft:\"450px\"}}>\r\n                    <div className=\"row\">\r\n            <div ><br/><br/>\r\n                <div className=\"card p-3\">\r\n                    <form method=\"post\" onSubmit={handleSubmit}>\r\n                        <div className=\"form-group\"> \r\n                            <label>Customer</label>\r\n                            <select name=\"custid\" value={account.custid} onChange={handleInput} required className=\"form-control\">\r\n                                <option value=\"\">Select Customer</option>\r\n                                {customers.map(x=>(\r\n                                    <option key={x.id} value={x.id}>{x.id} - {x.cname}</option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"form-group\">                \r\n                            <label>Account Type</label>\r\n                            <select name=\"actype\" value={account.actype} onChange={handleInput} required className=\"form-control\">\r\n                                <option value=\"\">Select Account Type</option>\r\n                                <option>Saving Account</option>\r\n                                <option>Current Account</option>\r\n                            </select>\r\n                        </div>\r\n                        <div className=\"form-group\">\r\n                            <label>Opening Amount</label>\r\n                            <input type=\"number\" name=\"balance\" required  value={account.balance} onChange={handleInput}\r\n                                className=\"form-control\"  placeholder=\"Opening Amount\" />\r\n                        </div>            \r\n                        <button type=\"submit\" className=\"btn btn-primary btn-block\">Open Account</button>\r\n                    </form> \r\n                </div>\r\n            </div>\r\n        </div>\r\n</div>   \r\n</div>\r\n</div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default OpenAccount;"]},"metadata":{},"sourceType":"module"}