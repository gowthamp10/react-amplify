{"ast":null,"code":"import _defineProperty from\"/home/ubuntu/Documents/BankingAppFinal/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/home/ubuntu/Documents/BankingAppFinal/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/home/ubuntu/Documents/BankingAppFinal/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ChangePassword(){var _useState=useState({\"userid\":sessionStorage.getItem(\"userid\"),\"pwd\":\"\",\"old\":\"\",\"cpwd\":\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var navigate=useNavigate();var dispatch=useDispatch();var role=sessionStorage.getItem(\"role\");console.log(\"Role \",role);var logout=function logout(){dispatch({type:'LogOut'});sessionStorage.clear();navigate(\"/\");};var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errmsg=_useState4[0],setErr=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),success=_useState6[0],setSuccess=_useState6[1];var handleInput=function handleInput(e){setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();console.log(\"info\",user);axios.post(\"http://localhost:8090/api/customers/changepwd\",user).then(function(resp){console.log(resp.data);if(resp.data.status=='error'){setErr(resp.data.error);setSuccess(null);}else{setSuccess(\"Password updated successfully\");setErr(null);setUser({\"userid\":sessionStorage.getItem(\"userid\"),\"pwd\":\"\",\"old\":\"\",\"cpwd\":\"\"});}}).catch(function(error){console.log(\"Error\",error);});};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{style:{paddingLeft:\"350px\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card shadow mt-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",children:/*#__PURE__*/_jsx(\"h5\",{children:\"Change Password\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsxs(\"form\",{method:\"post\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group form-row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label\",children:\"Current Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,name:\"old\",value:user.old,onChange:handleInput,className:\"form-control\",placeholder:\"Current Password\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group form-row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label\",children:\"New Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,name:\"pwd\",value:user.pwd,onChange:handleInput,className:\"form-control\",placeholder:\"New Password\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group form-row\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"col-sm-4 col-form-label\",children:\"Confirm Password\"}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8\",children:/*#__PURE__*/_jsx(\"input\",{type:\"password\",required:true,name:\"cpwd\",value:user.cpwd,onChange:handleInput,className:\"form-control\",placeholder:\"Repeat Password\"})})]}),\"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\",/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Change Password\",className:\"btn btn-primary \"})]})})]}),errmsg!=null?/*#__PURE__*/_jsx(\"div\",{className:\"alert text-danger text-center font-weight-bold\",children:errmsg}):'',success!=null?/*#__PURE__*/_jsx(\"div\",{className:\"alert text-success text-center font-weight-bold\",children:success}):'']})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:\"500px\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return logout();},className:\"list-group-item list-group-item-primary\",children:\"Logout\"})})]})})});}export default ChangePassword;","map":{"version":3,"sources":["/home/ubuntu/Documents/BankingAppFinal/src/components/ChangePassword.js"],"names":["axios","useEffect","useState","useNavigate","useDispatch","ChangePassword","sessionStorage","getItem","user","setUser","navigate","dispatch","role","console","log","logout","type","clear","errmsg","setErr","success","setSuccess","handleInput","e","target","name","value","handleSubmit","preventDefault","post","then","resp","data","status","error","catch","paddingLeft","old","pwd","cpwd"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\"\r\n\r\nfunction ChangePassword(){\r\n    const [user,setUser]=useState({\r\n        \"userid\":sessionStorage.getItem(\"userid\"),\r\n        \"pwd\":\"\",\r\n        \"old\":\"\",\r\n        \"cpwd\":\"\"\r\n    })\r\n    const navigate=useNavigate()\r\n    const dispatch=useDispatch()\r\n    const role=sessionStorage.getItem(\"role\")\r\n    console.log(\"Role \",role)\r\n    const logout=()=>{\r\n        dispatch({type:'LogOut'})\r\n        sessionStorage.clear();\r\n        navigate(\"/\");\r\n    }\r\n    const [errmsg,setErr]=useState(null)\r\n    const [success,setSuccess]=useState(null)\r\n\r\n    const handleInput=(e)=>{\r\n        setUser({...user,[e.target.name]:e.target.value})\r\n    }\r\n\r\n    const handleSubmit=e=>{\r\n        e.preventDefault()\r\n        console.log(\"info\",user)\r\n        axios.post(\"http://localhost:8090/api/customers/changepwd\",user)\r\n        .then(resp=>{\r\n            console.log(resp.data) \r\n            if(resp.data.status=='error'){\r\n                setErr(resp.data.error)\r\n                setSuccess(null)\r\n            }else{\r\n                setSuccess(\"Password updated successfully\") \r\n                setErr(null)  \r\n                setUser({\r\n                    \"userid\":sessionStorage.getItem(\"userid\"),\r\n                    \"pwd\":\"\",\r\n                    \"old\":\"\",\r\n                    \"cpwd\":\"\"\r\n                })                            \r\n            }\r\n        })\r\n        .catch(error=>{\r\n            console.log(\"Error\",error);\r\n        }) \r\n    }\r\n\r\n    return(\r\n        <>\r\n        <div >\r\n        <div className=\"container-fluid\">\r\n            <div className=\"row\">\r\n                \r\n                <div style={{paddingLeft:\"350px\"}} >\r\n                    <div className=\"card shadow mt-3\">\r\n                        <div className=\"card-header\">\r\n                            <h5>Change Password</h5>\r\n                        </div>\r\n                        <div className=\"card-body\">\r\n                            <form method=\"post\" onSubmit={handleSubmit}>\r\n                                <div className=\"form-group form-row\">\r\n                                    <label className=\"col-sm-4 col-form-label\">Current Password</label>\r\n                                    <div className=\"col-sm-8\">\r\n                                    <input type=\"password\" required name=\"old\" value={user.old} onChange={handleInput} className=\"form-control\"\r\n                                        placeholder=\"Current Password\"/>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"form-group form-row\">\r\n                                    <label className=\"col-sm-4 col-form-label\">New Password</label>\r\n                                    <div className=\"col-sm-8\">\r\n                                    <input type=\"password\" required name=\"pwd\" value={user.pwd} onChange={handleInput} className=\"form-control\"\r\n                                        placeholder=\"New Password\"/>\r\n                                        </div>\r\n                                </div>\r\n                                <div className=\"form-group form-row\">\r\n                                    <label className=\"col-sm-4 col-form-label\">Confirm Password</label>\r\n                                    <div className=\"col-sm-8\">\r\n                                    <input type=\"password\" required name=\"cpwd\" value={user.cpwd} onChange={handleInput} className=\"form-control\"\r\n                                        placeholder=\"Repeat Password\"/>\r\n                                        </div>\r\n                                </div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n                                <input type=\"submit\" value=\"Change Password\" className=\"btn btn-primary \"/>\r\n                            </form>  \r\n                        </div>\r\n                    </div>\r\n                    {errmsg !=null ? (\r\n                        <div className=\"alert text-danger text-center font-weight-bold\">\r\n                            {errmsg}\r\n                        </div>\r\n                    ): ''}\r\n                    {success !=null ? (\r\n                        <div className=\"alert text-success text-center font-weight-bold\">\r\n                            {success}\r\n                        </div>\r\n                    ): ''}\r\n                </div>\r\n            </div><br/>\r\n            <div style={{paddingLeft:\"500px\"}}>\r\n            <button onClick={()=>logout()} className=\"list-group-item list-group-item-primary\">Logout</button>\r\n            </div>\r\n        </div>\r\n        </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default ChangePassword;"]},"metadata":{},"sourceType":"module"}